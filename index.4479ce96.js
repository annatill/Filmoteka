const e={buttonRefHome:document.querySelector("#button-header-home"),buttonRefLibrary:document.querySelector("#button-header-library"),divRefButtonLibrary:document.querySelector(".header-logo--position"),divRefWatchedQueue:document.querySelector(".header-button__library"),filmNameRef:document.querySelector("#film-name"),filmVotesRef:document.querySelector("#votes"),filmAverageVotesRef:document.querySelector("#average-votes"),filmPopularityRef:document.querySelector("#popularity"),filmOriginalTitleRef:document.querySelector("#original-title"),filmGenreRef:document.querySelector("#genre"),filmOverviewRef:document.querySelector("#film-overview"),backdropRef:document.querySelector("#backdrop"),filmInfoCloseBtnRef:document.querySelector(".js-close"),filmImageRef:document.querySelector("#film-modal-image"),filmAddToWatchedBtnRef:document.querySelector("#js-watched"),filmAddToQueueBtnRef:document.querySelector("#js-queue"),filmWatchTrailerBtnRef:document.querySelector("#js-trailer"),galleryListRef:document.querySelector("#js-list"),WATCHED:"watched",QUEUE:"queue"};e.buttonRefLibrary.addEventListener("click",(function(){e.divRefButtonLibrary.classList.add("header-logo__library--position"),e.buttonRefLibrary.classList.add("header-nav--active"),e.buttonRefHome.classList.remove("header-nav--active"),e.divRefWatchedQueue.style.display="flex"})),e.buttonRefHome.addEventListener("click",(function(){e.divRefButtonLibrary.classList.remove("header-logo__library--position"),e.buttonRefLibrary.classList.remove("header-nav--active"),e.buttonRefHome.classList.toggle("header-nav--active"),e.divRefWatchedQueue.style.display="none"}));const t=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],n=[];function i(e){return e.slice(0,4)}(async()=>{try{const e=await(async()=>{const e=await fetch("https://api.themoviedb.org/3/trending/all/day?api_key=cb1bcc244723619ea7f2217b5a84ccd8");return(await e.json()).results})();n.push(...e)}catch(e){console.error("Error:",e)}})().then((()=>{!function(n){const a=n.map((e=>{const{title:n,name:a,poster_path:o,id:r,release_date:c,first_air_date:d="",genre_ids:s=[]}=e;let l=i(c||d),m=n||a;const u=function(e,t){const n=[];return e.forEach((e=>{if(n.length>=2)return;const i=t.find((t=>t.id===e));i&&n.push(i.name)})),n.join(", ")}(s,t);return`<li class="movie" data-id=${r}>\n<img src="${`https://image.tmdb.org/t/p/w500${o}`}" width="395"/>\n<p class="movie__title">${m}</p>\n<p class="movie__genres">${u}</p>\n<p class="movie__year">${l}</p>\n</li>\n`})).join("");e.galleryListRef.insertAdjacentHTML("afterbegin",a)}(n)}));async function a(e){return await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=cb1bcc244723619ea7f2217b5a84ccd8`).then((e=>e.json()))}function o(t){const{original_title:n,genres:i,overview:a,popularity:o,vote_count:r,vote_average:c,poster_path:d,id:s}=t;console.log("object->",t);const{filmNameRef:l,filmVotesRef:m,filmAverageVotesRef:u,filmPopularityRef:f,filmOriginalTitleRef:y,filmGenreRef:v,filmOverviewRef:R,filmImageRef:h,filmAddToWatchedBtnRef:p,filmAddToQueueBtnRef:g,filmWatchTrailerBtnRef:b}=e;h.src=`https://image.tmdb.org/t/p/w500${d}`,h.alt=n,l.textContent=n,y.textContent=n,R.textContent=a,f.textContent=o.toFixed(1),m.textContent=r,u.textContent=c.toFixed(1);const L=i.map((e=>e.name));v.textContent=L.join(", "),p.dataset.id=s,g.dataset.id=s,b.dataset.id=s}const{backdropRef:r,filmImageRef:c}=e;function d(e){e.target.classList.contains("backdrop")&&(e.currentTarget.classList.add("is-hidden"),e.currentTarget.removeEventListener("click",d))}function s(e){"Escape"===e.code&&(r.classList.add("is-hidden"),document.removeEventListener("keydown",s))}function l(e){r.classList.add("is-hidden"),e.currentTarget.removeEventListener("click",l)}e.galleryListRef.addEventListener("click",(function(t){if("LI"!==t.target.nodeName&&"LI"!==t.target.parentNode.nodeName)return;const{backdropRef:n,filmInfoCloseBtnRef:i}=e;a(Number(t.target.dataset.id??t.target.parentNode.dataset.id)).then((e=>{o(e)})).then((()=>{e.backdropRef.classList.remove("is-hidden")})),document.addEventListener("keydown",s),n.addEventListener("click",d),i.addEventListener("click",l)}));
//# sourceMappingURL=index.4479ce96.js.map
